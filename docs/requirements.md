# Flowlet 要件定義書

## 1. システム概要
自身の家計（収支）と資産（残高）を一元管理し、目的別に予算を立てて計画的な資産形成を支援するWebアプリ。

## 2. 主要ターゲットと目的
*   **ターゲット:** 個人（自分用）
*   **目的:**
    *   日々の家計管理（収支の把握）
    *   保有資産の全体像把握（資産管理）
    *   将来に向けた計画的な積立と、資金不足の防止

## 3. 主要機能要件

### 3.1 資産管理（二重管理構造）
*   **実口座 (Physical Account):** 銀行、証券、クレジットカード、現金など、物理的なお金の場所。
*   **仮想口座 (Virtual Account):** 「旅行用」「予備費」「自由費」など、ユーザーが設定したお金の使用目的。
*   **同期:** すべての実口座の残高合計は、すべての仮想口座の残高合計と一致するように管理する。

### 3.2 家計管理
*   **締め日設定:** 月の開始日（例：毎月25日）をユーザーが設定可能。
*   **予算管理:** カテゴリ別の予算設定と、実績との対比。
*   **今月あといくら使えるかの可視化:** 
    *   `自由に使える額 = 現在の流動資産 - 次回の給与日までの予定支出 - 今月の積立目標額`

### 3.3 取引入力
*   **複合内訳（スプリット）管理:** 
    *   一つの取引に複数の内訳（例：給与の額面・所得税・社会保険・手取り）を紐付け可能。
    *   ふるさと納税などの税金控除管理にも対応。
*   **実・仮想口座への同時反映:** 一つの入力で、どの実口座に入り、どの仮想口座に割り振るかを同時に指定。

### 3.4 資金移動とアラート
*   **引き落とし管理:** クレジットカード等の引き落とし日前にアラートを通知。
*   **振替提案:** 引き落とし額に対して実口座の残高が不足する場合、どの口座からいくら振替すべきかを提示。
*   **振替日通知:** 資金移動を実行すべき日にリマインド。

### 3.5 自動化と平準化
*   **自動記録:** 定期的な収支（家賃、保険等）をルールに基づいて自動生成。
*   **年間支出の平準化:** 年1回の支払いを登録すると、毎月の必要積立額を算出し、予算に組み込む機能。

## 4. UI/UX 構成案
1.  **ホーム（ダッシュボード）:** 予算残高、不足アラート、目標進捗の可視化。
2.  **取引一覧・入力:** カレンダー/リスト形式の履歴と、内訳対応の入力フォーム。
3.  **資産・目的管理:** 実口座と仮想口座の残高確認と、資金移動（振替・割り振り）。
4.  **設定・プランニング:** 予算設定、定期ルール、年間支出シミュレーション。

## 5. 技術スタック
*   **Frontend:** React 19, TypeScript, Material UI (MUI)
*   **Build:** Vite
